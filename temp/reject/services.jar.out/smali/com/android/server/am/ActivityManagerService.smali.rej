*** ActivityManagerService.smali	2016-01-12 21:05:57.568744492 +0800
--- ActivityManagerService.smali	2016-01-12 21:04:57.115539233 +0800
***************
*** 1586,1591 ****
      .local v13, "systemDir":Ljava/io/File;
      invoke-virtual {v13}, Ljava/io/File;->mkdirs()Z
  
      new-instance v0, Lcom/android/server/am/BatteryStatsService;
  
      new-instance v1, Ljava/io/File;
--- 1586,1593 ----
      .local v13, "systemDir":Ljava/io/File;
      invoke-virtual {v13}, Ljava/io/File;->mkdirs()Z
  
+     invoke-static {}, Lcom/android/server/am/ExtraActivityManagerService;->init()V
+ 
      new-instance v0, Lcom/android/server/am/BatteryStatsService;
  
      new-instance v1, Ljava/io/File;
***************
*** 3862,3867 ****
  
      .end local p3    # "intent":Landroid/content/Intent;
      .local v15, "intent":Landroid/content/Intent;
      const/16 v3, 0x10
  
      invoke-virtual {v15, v3}, Landroid/content/Intent;->addFlags(I)Landroid/content/Intent;
--- 3880,3889 ----
  
      .end local p3    # "intent":Landroid/content/Intent;
      .local v15, "intent":Landroid/content/Intent;
+     move-object/from16 v0, p2
+ 
+     invoke-virtual {v15, v0}, Landroid/content/Intent;->setSender(Ljava/lang/String;)V
+ 
      const/16 v3, 0x10
  
      invoke-virtual {v15, v3}, Landroid/content/Intent;->addFlags(I)Landroid/content/Intent;
***************
*** 10871,10876 ****
  
      invoke-virtual {v12, v3, v0}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
  
      iput-object v12, v15, Landroid/os/Message;->obj:Ljava/lang/Object;
  
      move-object/from16 v0, p0
--- 10893,10904 ----
  
      invoke-virtual {v12, v3, v0}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
  
+     const-string v3, "crash"
+ 
+     move-object/from16 v0, p2
+ 
+     invoke-virtual {v12, v3, v0}, Ljava/util/HashMap;->put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
+ 
      iput-object v12, v15, Landroid/os/Message;->obj:Ljava/lang/Object;
  
      move-object/from16 v0, p0
***************
*** 19241,19247 ****
      move-result-object v1
  
      .local v1, "context":Landroid/content/Context;
!     const v4, 0x103006b
  
      invoke-virtual {v1, v4}, Landroid/content/Context;->setTheme(I)V
  
--- 19337,19343 ----
      move-result-object v1
  
      .local v1, "context":Landroid/content/Context;
!     sget v4, Lmiui/R$style;->Theme_Light:I
  
      invoke-virtual {v1, v4}, Landroid/content/Context;->setTheme(I)V
  
