*** AbsListView.smali	2016-01-12 21:05:40.796396341 +0800
--- AbsListView.smali	2016-01-12 21:04:41.599253821 +0800
***************
*** 355,361 ****
  .end method
  
  .method public constructor <init>(Landroid/content/Context;)V
!     .locals 6
      .param p1, "context"    # Landroid/content/Context;
  
      .prologue
--- 375,381 ----
  .end method
  
  .method public constructor <init>(Landroid/content/Context;)V
!     .locals 7
      .param p1, "context"    # Landroid/content/Context;
  
      .prologue
***************
*** 2522,2535 ****
      .end local v0    # "motionView":Landroid/view/View;
      .end local v2    # "x":F
      :pswitch_2
      invoke-direct {p0, v3}, Landroid/widget/AbsListView;->scrollIfNeeded(I)V
  
      goto :goto_0
  
      nop
  
      :pswitch_data_0
!     .packed-switch 0x0
          :pswitch_1
          :pswitch_1
          :pswitch_1
--- 2597,2626 ----
      .end local v0    # "motionView":Landroid/view/View;
      .end local v2    # "x":F
      :pswitch_2
+     invoke-static {p0, v7}, Landroid/widget/AbsListViewInjector;->setListScaleIfNeeded(Landroid/widget/AbsListView;I)Z
+ 
+     move-result v4
+ 
+     if-eqz v4, :cond_miui_1
+ 
+     iput v3, p0, Landroid/widget/AbsListView;->mLastY:I
+ 
+     return-void
+ 
+     :cond_miui_1
      invoke-direct {p0, v3}, Landroid/widget/AbsListView;->scrollIfNeeded(I)V
  
      goto :goto_0
  
+     :pswitch_miui_0
+     iput v6, p0, Landroid/widget/AbsListView;->mInertia:I
+ 
+     goto :goto_0
      nop
  
      :pswitch_data_0
!     .packed-switch -0x1
!         :pswitch_miui_0
          :pswitch_1
          :pswitch_1
          :pswitch_1
***************
*** 10176,10181 ****
  
      .end local v1    # "child":Landroid/view/View;
      :cond_6
      iput v7, p0, Landroid/widget/AbsListView;->mLastY:I
  
      goto :goto_1
--- 10317,10332 ----
  
      .end local v1    # "child":Landroid/view/View;
      :cond_6
+     iget v8, p0, Landroid/widget/AbsListView;->mLastY:I
+ 
+     iget v10, p0, Landroid/widget/AbsListView;->mDownMotionY:I
+ 
+     sub-int/2addr v8, v10
+ 
+     sub-int v8, v7, v8
+ 
+     iput v8, p0, Landroid/widget/AbsListView;->mDownMotionY:I
+ 
      iput v7, p0, Landroid/widget/AbsListView;->mLastY:I
  
      goto :goto_1
